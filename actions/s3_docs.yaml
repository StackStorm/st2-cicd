---
  name: "s3_docs"
  runner_type: "run-remote"
  description: "s3 docs"
  enabled: true
  entry_point: ""
  parameters: 
    repo:
      type: "string"
      required: true
      default: "st2_master"
    branch:
      type: "string"
      required: true
      default: "master"
    bucket:
      type: "string"
      required: true
      default: "docs-staging.stackstorm.net"
      description: "The base path to the bucket"
    version:
      type: "string"
      required: true
      description: "St2 version"
    bucket_url:
      type: "string"
      immutable: true
      default: "s3://{{bucket}}"
    cmd: 
      immutable: false
      default: "cd /tmp/{{repo}}/docs/build/html && s3cmd put --recursive * {{bucket_url}}/{{version}}/{% if branch == 'master' %} && s3cmd put --recursive * {{bucket_url}}/latest/{% elif version == system.st2_stable_version %} && s3cmd put --recursive * {{bucket_url}}/{% endif %}"
    kwarg_op: 
      immutable: true
      default: "--"

